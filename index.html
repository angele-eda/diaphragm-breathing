<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>1분 횡경막 호흡 타이머</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #ffffff;
      padding-top: 40px;
    }
    #timer {
      font-size: 48px;
      margin-top: 20px;
      font-weight: bold;
    }
    #message {
      font-size: 28px;
      margin-top: 15px;
    }
    button {
      margin-top: 30px;
      font-size: 20px;
      padding: 12px 28px;
      border-radius: 10px;
      border: none;
      background: #4CAF50;
      color: white;
    }
  </style>
</head>
<body>

<h1>1분 횡경막 호흡 타이머</h1>
<div id="message">시작 버튼을 눌러주세요</div>
<div id="timer">60</div>

<button onclick="startBreathing()">▶ 시작</button>

<script>
let countdown;
let audioIndex = 0;

const messages = [
  ["숨 들이마셔요 (4초)", 4],
  ["잠시 멈춰요 (1초)", 1],
  ["천천히 내쉬어요 (6초)", 6],
  ["잠시 멈춰요 (1초)", 1]
];

const voice = new SpeechSynthesisUtterance();
voice.lang = "ko-KR";
voice.pitch = 1.2;

function speak(text) {
  voice.text = text;
  speechSynthesis.speak(voice);
}

function startBreathing() {
  let total = 60;
  let step = 0;
  document.getElementById("timer").innerHTML = total;

  countdown = setInterval(() => {
    total--;
    document.getElementById("timer").innerHTML = total;

    if (total <= 0) {
      clearInterval(countdown);
      speak("완료되었습니다. 수고하셨어요.");
    }

  }, 1000);

  runStep(step);
}

function runStep(step) {
  if (step >= messages.length) step = 0;

  const [text, duration] = messages[step];

  document.getElementById("message").innerHTML = text;
  speak(text);

  setTimeout(() => {
    runStep(step + 1);
  }, duration * 1000);
}
</script>

</body>
</html>